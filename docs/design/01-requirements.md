# 요구사항 명세
## 📝 개요
루프팩 이커머스는 사용자가 여러 브랜드의 상품을 둘러보고, 마음에 드는 상품에 좋아요를 누르고, 포인트로 결제하는 쇼핑 경험을 제공합니다.
본 문서는 상품, 브랜드, 좋아요, 주문/결제 도메인에 대한 기능 요구사항을 사용자 시나리오 기반으로 정리합니다.

## 👥 유저 시나리오 기반 기능 정의
###  🛒 상품 목록 조회
#### 시나리오
- 사용자는 여러 카테고리 및 브랜드의 상품을 탐색하며, 필터와 정렬 기능을 활용해 원하는 상품을 조회한다.
#### Main Flow
1. 사용자가 상품 목록 페이지에 진입한다.
2. 카테고리, 브랜드, 정렬 기준, 페이지 번호, 페이지당 상품 수를 선택한다.
3. 시스템은 조건에 맞는 상품 목록을 반환한다. 
4. 각 상품의 상품명, 상품 이미지, 브랜드, 가격, 좋아요 수가 조회된다.
#### Alternate Flow
- 페이지 번호를 선택하지 않은 경우 → 기본값(1)로 페이지 진입
- 정렬 기준을 선택하지 않은 경우 → 기본값(latest)으로 정렬
- 페이지당 상품 수를 선택하지 않은 경우 → 기본값(20)으로 조회됨
- 카테고리 및 브랜드를 선택하지 않은 경우 → 전체 카테고리 및 브랜드 상품 조회
#### Exception Flow
- 상품 조회 실패 → 오류를 반환한다.
---
### 🎁 상품 상세 조회
#### 시나리오
- 사용자는 상품의 상세 정보를 확인하고, 구매 여부를 결정한다.
#### Main Flow
1. 사용자가 상품 상세 페이지에 진입한다.
2. 시스템은 상품 정보, 이미지, 가격, 재고, 좋아요 수를 반환한다.
#### Exception Flow
- 존재하지 않는 상품 ID → 404 오류 반환
---
### 🏷️ 브랜드 조회
#### 시나리오
- 사용자는 특정 브랜드의 정보를 확인하고, 해당 브랜드의 상품을 탐색한다.
#### Main Flow
1. 사용자가 브랜드 상세 페이지에 진입한다.
2. 시스템은 브랜드 정보와 관련 상품 목록을 반환한다.
#### Exception Flow
- 존재하지 않는 브랜드 ID → 오류 메시지 반환
---
### 🫶 상품 좋아요 등록/취소
#### 시나리오
- 사용자는 마음에 드는 상품에 좋아요를 누르거나 취소한다.
#### Main Flow
1. 사용자가 로그인한 상태로 상품 상세 페이지에 진입한다.
2. 좋아요 버튼을 클릭한다.
3. 시스템은 현재 좋아요 상태를 확인하고, 등록 또는 취소 처리한다.
4. 좋아요 수를 갱신하고 UI에 반영한다.
#### Alternate Flow
- 이미 좋아요한 상품 → 좋아요 취소 처리
#### Exception Flow
- 로그인하지 않은 사용자 → 좋아요 기능 사용 불가 (리디렉션 또는 에러 메시지)
---
### 💳 주문 생성 및 결제
#### 시나리오
- 사용자는 여러 상품을 장바구니에 담고, 포인트로 결제하여 주문을 완료한다.
#### Main Flow
1. 사용자가 주문 요청을 보낸다 (상품 ID, 수량 포함).
2. 시스템은 각 상품의 재고를 확인하고 차감한다.
3. 사용자의 포인트를 확인하고 차감한다.
4. 주문 정보를 외부 시스템에 전송한다.
5. 주문이 성공적으로 생성되고, 주문 ID가 반환된다.
#### Alternate Flow
- 일부 상품만 재고 부족 → 전체 주문 실패
#### Exception Flow
- 포인트 부족 → 주문 실패
- 외부 시스템 오류 → 주문 롤백 및 에러 메시지 반환
---
## 🕹️ 비기능적 요구사항
- 모든 API는 인증 없이 `X-USER-ID` 헤더로 사용자 식별
- 좋아요 기능은 멱등하게 동작해야 함
- 주문은 재고 및 포인트 확인 후 처리되며, 실패 시 전체 롤백
- 상품 목록/상세 조회 시 좋아요 수 포함
- 포인트는 사전 충전된 값으로만 결제 가능
---
## 📋 유비쿼터스 언어
| 한글 용어 | 시스템 용어 |
|-----------|--------------|
| 상품 | `product` |
| 브랜드 | `brand` |
| 좋아요 | `like` |
| 주문 | `order` |
| 포인트 | `point` |
| 사용자 | `user` |
모든 문서, 코드, 명세서에서 위 용어를 일관되게 사용합니다.