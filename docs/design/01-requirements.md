# 요구사항 명세
## 📝 개요
루프팩 이커머스는 사용자가 여러 브랜드의 상품을 둘러보고, 마음에 드는 상품에 좋아요를 누르고, 포인트로 결제하는 쇼핑 경험을 제공합니다.
본 문서는 상품, 브랜드, 좋아요, 주문/결제 도메인에 대한 기능 요구사항을 사용자 시나리오 기반으로 정리합니다.

## 👥 유저 시나리오 기반 기능 정의
###  🛒 상품 목록 조회
#### 시나리오
- 사용자는 여러 브랜드의 상품을 탐색하며, 필터와 정렬 기능을 활용해 원하는 상품을 조회한다.
#### Main Flow
1. 사용자가 상품 목록을 조회할 수 있다.
2. 사용자는 특정 브랜드를 선택하여 해당 상품 목록을 조회할 수 있다.
3. 사용자는 원하는 정렬 기준을 선택하여 상품 목록을 조회할 수 있다.
4. 사용자는 원하는 페이지 번호를 선택하여 상품 목록을 조회할 수 있다.
5. 사용자는 페이지당 상품 수를 선택하여 상품 목록을 조회할 수 있다. 
6. 시스템은 조건에 맞는 상품 목록을 반환한다.
7. 상품 목록에는 각 상품의 총 좋아요 수 정보가 포함된다.
#### Alternate Flow
- 사용자가 특정 브랜드를 선택하지 않은 경우 → 전체 브랜드 상품 조회
- 정렬 기준을 선택하지 않은 경우 → 기본 정렬 기준(최신순)으로 조회 
- 페이지 번호를 선택하지 않은 경우 → 상품 목록 조회 페이지 진입 시 1페이지로 조회
- 페이지당 상품 수를 선택하지 않은 경우 → 기본 페이지당 상품 수(20)로 조회
#### Exception Flow
- 상품 목록이 없을 경우 빈 페이지로 조회 된다.
- 사용자가 선택한 값이 잘못된 값일 경우 "상품 목록을 조회할 수 없습니다." 메세지가 노출된다.
---
### 🎁 상품 상세 조회
#### 시나리오
- 사용자는 상품의 상세 정보를 확인한다.
#### Main Flow
1. 사용자가 특정 상품을 클릭하여 상세 페이지에 진입한다.
2. 시스템은 상품 상세 정보를 반환한다.
3. 상품 상세 정보에는 상품의 총 좋아요 수 정보가 포함된다.
#### Exception Flow
- 해당 상품이 존재하지 않을 경우 "상품 상세 정보를 조회할 수 없습니다." 메세지가 노출된다.
---
### 🏷️ 브랜드 조회
#### 시나리오
- 사용자는 특정 브랜드의 정보를 확인한다.
#### Main Flow
1. 사용자가 특정 브랜드를 클릭하여 상세 페이지에 진입한다.
2. 시스템은 브랜드 상세 정보를 반환한다.
#### Exception Flow
- 해당 브랜드가 존재하지 않을 경우 "브랜드 정보를 조회할 수 없습니다." 메세지가 노출된다.
---
### 🫶 상품 좋아요 등록/취소
#### 시나리오
- 사용자는 마음에 드는 상품에 좋아요를 누르거나 취소한다.
#### Main Flow
1. 사용자는 마음에 드는 상품에 좋아요 버튼을 눌러 좋아요를 등록할 수 있다. 
2. 사용자는 이미 누른 좋아요 버튼을 다시 눌러 좋아요를 취소할 수 있다.
#### Exception Flow
- 해당 상품이 존재하지 않을 경우 "해당 상품이 존재하지 않습니다." 메세지가 노출된다.
- 로그인하지 않은 사용자일 경우 "로그인이 필요합니다." 메세지가 노출된다.
---
### 😍 사용자가 좋아요 한 상품 목록 조회
#### 시나리오
- 사용자는 자신이 좋아요 한 상품 목록을 조회할 수 있다.
#### Main Flow
1. 사용자가 좋아요 한 상품 목록 페이지에 진입한다.
2. 시스템은 사용자가 좋아요 한 상품 목록을 반환한다.
#### Exception Flow
- 사용자가 좋아요 한 상품 목록이 없을 경우 빈 페이지로 조회된다.
- 로그인하지 않은 사용자일 경우 "로그인이 필요합니다." 메세지가 노출된다.
---
### 💳 주문 생성 및 결제
#### 시나리오
- 사용자는 여러 상품을 장바구니에 담고, 포인트로 결제하여 주문을 완료한다.
#### Main Flow
1. 사용자가 주문 요청을 보낸다.
2. 시스템은 각 상품의 주문 수량만큼 재고가 있는지 확인한다.
3. 시스템은 사용자의 포인트가 총 주문 금액 이상인지 확인한다.
4. 시스템은 상품 재고와 포인트가 충분하면 주문을 진행한다. 
5. 시스템은 주문 수량만큼 재고를 차감하고, 주문 금액만큼 사용자의 포인트를 차감한다. 
6. 시스템은 주문 정보를 외부 시스템에 전송한다. 
7. 시스템은 주문이 성공적으로 완료되면 주문 ID를 반환한다.
#### Exception Flow
- 로그인하지 않은 사용자일 경우 "로그인이 필요합니다." 메세지가 노출된다.
- 상품 재고가 부족할 경우 "상품 재고가 부족합니다." 메세지가 노출된다.
- 사용자 포인트가 부족할 경우 "포인트가 부족합니다." 메세지가 노출된다.
- 주문 처리 중 시스템 오류가 발생했을 경우 "주문이 완료되지 못했습니다." 메세지가 노출된다.
---
### 🗂️ 사용자의 주문 목록 조회
#### 시나리오
- 사용자는 자신이 주문한 목록을 조회한다.
#### Main Flow
1. 사용자가 주문 목록 조회 페이지에 진입한다.
2. 시스템은 사용자의 주문 목록을 반환한다.
#### Exception Flow
- 사용자가 주문한 목록이 없을 경우 빈 페이지로 조회된다.
- 로그인하지 않은 사용자일 경우 "로그인이 필요합니다." 메세지가 노출된다.
---
### 📌 단일 주문 상세 조회
#### 시나리오
- 사용자는 자신이 주문한 내역 중 특정 주문 정보를 상세 조회한다.
#### Main Flow
1. 사용자가 자신이 주문한 목록 중 특정 주문을 선택한다. 
2. 시스템은 해당 주문의 상세 정보를 반환한다.
#### Exception Flow
- 로그인하지 않은 사용자일 경우 "로그인이 필요합니다." 메세지가 노출된다.
- 선택한 주문이 존재하지 않을 경우 "해당 주문이 존재하지 않습니다." 메세지가 노출된다.
---
## 🕹️ 비기능적 요구사항
- 모든 API는 별도의 인증 없이 `X-USER-ID` 헤더로 동작한다.
- 상품에 대한 좋아요 추가/해제 기능은 멱등하게 동작하여야 한다.
- 주문은 재고 및 포인트 확인 후 처리되며, 주문 실패 시 차감되었던 재고와 포인트는 자동으로 복구되어야 합니다.
---
## 📋 유비쿼터스 언어
| 한글 용어 | 시스템 용어    |
|-------|-----------|
| 상품    | `product` |
| 브랜드   | `brand`   |
| 좋아요   | `like`    |
| 주문    | `order`   |
| 포인트   | `point`   |
| 사용자   | `user`    |
| 최신순   | `latest`  |

모든 문서, 코드, 명세서에서 위 용어를 일관되게 사용합니다.